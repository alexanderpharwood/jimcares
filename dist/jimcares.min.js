!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Jim=t()}(this,function(){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(){if(void 0===window.__jimcares)throw new Error("Jim is not initialised yet. Call Jim.init({options}) first");return window.__jimcares}function o(e){if("string"!=typeof e)throw new TypeError("differance must be of type 'string': '"+u(e)+"' given.");return i().roots[e]}function a(e){return e.split(window.__jimcares.queryNotation)}function f(e){if("string"!=typeof e)throw new TypeError("differance must be of type 'string': '"+u(e)+"' given.");var t=i(),r=a(e);if(0===r.length)return t.roots[e].value;if(void 0!==t.roots[r[0]]){var n=t.roots[r[0]].value;for(var o in r.shift(),r){if(void 0===n[r[o]])return;n=n[r[o]]}return n}}function t(){return function(e){for(var t=[e],r=0,n=0;n<t.length;n++)switch(u(t[n])){case"boolean":r+=4;break;case"number":r+=8;break;case"string":r+=2*t[n].length;break;case"object":if("[object Array]"!=Object.prototype.toString.call(t[n]))for(var o in t[n])r+=2*o.length;for(var o in t[n]){for(var i=!1,a=0;a<t.length;a++)if(t[a]===t[n][o]){i=!0;break}i||t.push(t[n][o])}}return r}(i().roots)}function s(){i().updated_at=new Date}function r(){return JSON.stringify(i())}function c(e){if("string"!=typeof e)throw new TypeError("path must be of type 'string': '"+u(e)+"' given.");var t=i();a(e);return s(),delete t.roots[e]}function l(e){if("string"!=typeof e)throw new TypeError("differance must be of type 'string': '"+u(e)+"' given.");var t=new Date;return t=function(e,t,r){function n(){o.getDate()!==e.getDate()&&o.setDate(0)}var o=new Date(e);switch(t.toLowerCase()){case"year":case"years":o.setFullYear(o.getFullYear()+r),n();break;case"month":case"months":o.setMonth(o.getMonth()+r),n();break;case"week":case"weeks":o.setDate(o.getDate()+7*r);break;case"day":case"days":o.setDate(o.getDate()+r);break;case"hour":case"hours":o.setTime(o.getTime()+36e5*r);break;case"minute":case"minutes":o.setTime(o.getTime()+6e4*r);break;case"second":case"seconds":o.setTime(o.getTime()+1e3*r);break;default:o=void 0}return o}(t,e.split(" ")[1],e.split(" ")[0])}return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,null,[{key:"init",value:function(e){return function(e){if(void 0!==e){if(void 0!==e.defaultExpiration)e.defaultExpiration;if(void 0!==e.queryNotation)e.queryNotation}return window.__jimcares={created_at:new Date,updated_at:new Date,roots:{},defaultExpiration:"24 hours",queryNotation:"/"},window.__jimcares.expirationWorker=setInterval(function(){for(var e in window.__jimcares.roots)o(e).expires_at.getTime()<(new Date).getTime()&&c(e)},5e3),!0}(e)}},{key:"has",value:function(e){return function(e){if("string"!=typeof e)throw new TypeError("path must be of type 'string': '"+u(e)+"' given.");var t=void 0!==o(e),r=void 0!==f(e);return t||r}(e)}},{key:"remember",value:function(e,t,r){return function(e,t,r){if("string"!=typeof e)throw new TypeError("path must be of type 'string'");var n=i().roots[e]={};return r=void 0===r?window.__jimcares.defaultExpiration:r,n.value=t,n.created_at=new Date,n.updated_at=new Date,n.deleted_at=null,n.expires_at=l(r),s(),!0}(e,t,r)}},{key:"get",value:function(e){return f(e)}},{key:"root",value:function(e){return o(e)}},{key:"writeToLS",value:function(){return function(){if("undefined"==typeof Storage)throw new Error("Client does not support local storage");return localStorage.setItem("__jimcares",r())}()}},{key:"trash",value:function(e){return function(e){if("string"!=typeof e)throw new TypeError("path must be of type 'string': '"+u(e)+"' given.");var t=o(e);return void 0!==t&&(t.deleted_at=new Date,s(),!0)}(e)}},{key:"isTrashed",value:function(e){return function(e){if("string"!=typeof e)throw new TypeError("path must be of type 'string': '"+u(e)+"' given.");var t=o(e);return void 0!==t&&null!==t.deleted_at}(e)}},{key:"forget",value:function(e){return c(e)}},{key:"flush",value:function(){!function(){var e=i();for(var t in e.roots)delete e.roots[t]}()}},{key:"destroy",value:function(){clearInterval(window.__jimcares.expirationWorker),delete window.__jimcares}},{key:"toJson",value:function(){return r()}},{key:"size",value:function(){return t()}},{key:"count",value:function(){return function(){var e=i();return Object.keys(e.roots).length}()}},{key:"equals",value:function(e,t){return function(e,t){if("string"!=typeof e)throw new TypeError("path must be of type 'string': '"+u(e)+"' given.");return f(e)===t}(e,t)}}]),e}()});
//# sourceMappingURL=jimcares.min.js.map
