!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Jim=t()}(this,function(){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){if(void 0===window.__jimcares)throw new Error("Jim is not initialised yet. Call Jim.init({options}) first");return window.__jimcares}function i(e){return e.split("/")}function n(e){var t=a(),n=i(e);if(0===n.length)return t.roots[e].value;if(void 0!==t.roots[n[0]]){var r=t.roots[n[0]].value;for(var o in n.shift(),n)r=r[n[o]];return r}}function t(){return function(e){for(var t=[e],n=0,r=0;r<t.length;r++)switch(u(t[r])){case"boolean":n+=4;break;case"number":n+=8;break;case"string":n+=2*t[r].length;break;case"object":if("[object Array]"!=Object.prototype.toString.call(t[r]))for(var o in t[r])n+=2*o.length;for(var o in t[r]){for(var a=!1,i=0;i<t.length;i++)if(t[i]===t[r][o]){a=!0;break}a||t.push(t[r][o])}}return n}(a().roots)}function o(e){var t=a(),n=i(e);return 0===n.length?t.roots[e].value:t.roots[n[0]]}function c(){a().updated_at=new Date}function s(e){var t=o(e);return void 0!==t&&(t.deleted_at=new Date,c(),!0)}function f(){return JSON.stringify(a())}function l(e){var t=a();i(e);return c(),delete t.roots[e]}function d(e){var t=new Date;return t=function(e,t,n){function r(){o.getDate()!==e.getDate()&&o.setDate(0)}var o=new Date(e);switch(t.toLowerCase()){case"year":case"years":o.setFullYear(o.getFullYear()+n),r();break;case"month":case"months":o.setMonth(o.getMonth()+n),r();break;case"week":case"weeks":o.setDate(o.getDate()+7*n);break;case"day":case"days":o.setDate(o.getDate()+n);break;case"hour":case"hours":o.setTime(o.getTime()+36e5*n);break;case"minute":case"minutes":o.setTime(o.getTime()+6e4*n);break;case"second":case"seconds":o.setTime(o.getTime()+1e3*n);break;default:o=void 0}return o}(t,e.split(" ")[1],e.split(" ")[0])}return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"init",value:function(){return function(e){if(void 0!==e&&void 0!==e.defaultExpiration)e.defaultExpiration;return window.__jimcares={created_at:new Date,updated_at:new Date,roots:{},defaultExpiration:"24 hours"},window.__jimcares.expirationWorker=setInterval(function(){for(var e in window.__jimcares.roots)o(e).expires_at.getTime()<(new Date).getTime()&&l(e)},5e3),!0}()}},{key:"has",value:function(e){return function(e){return void 0!==n(e)}(e)}},{key:"remember",value:function(e,t,n){return function(e,t,n){if(void 0===e)return!1;var r=a().roots[e]={};return n=void 0===n?window.__jimcares.defaultExpiration:n,r.value=t,r.created_at=new Date,r.updated_at=new Date,r.deleted_at=null,r.expires_at=d(n),c(),!0}(e,t,n)}},{key:"get",value:function(e){return n(e)}},{key:"root",value:function(e){return o(e)}},{key:"writeToLS",value:function(){return function(){if("undefined"==typeof Storage)throw new Error("Client does not support local storage");return localStorage.setItem("__jimcares",f())}()}},{key:"trash",value:function(e){return s(e)}},{key:"isTrashed",value:function(e){return s(e)}},{key:"forget",value:function(e){return l(e)}},{key:"clear",value:function(){!function(){var e=a();for(var t in e.roots)delete e.roots[t]}()}},{key:"destroy",value:function(){clearInterval(window.__jimcares.expirationWorker),delete window.__jimcares}},{key:"toJson",value:function(){return f()}},{key:"size",value:function(){return t()}},{key:"count",value:function(){return function(){var e=a();return Object.keys(e.roots).length}()}},{key:"equals",value:function(e,t){return function(e,t){return n(e)===t}(e,t)}}]),e}()});
//# sourceMappingURL=jimcares.min.js.map
